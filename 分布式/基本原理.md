[TOC]

## 分布式环境的各种问题

**通信异常**

网络的不可靠，导致消息丢失或者消息延迟

**网络分区**

由于网络发生异常，只有部分节点能够正常通信，而一些节点不能，这样的现象称为网络分区，俗称‘脑裂’。

**三态**

每一次请求与响应存在三态概念，成功，失败，超时。超时一般又分为两种情况：

* 由于网络原因，该请求消息没有成功发送到接收方，在发送过程中发生了消息丢失
* 该请求消息被接受方接受并进行了处理，但将响应反馈给发送方时发生了消息丢失

**节点故障**

服务器节点的僵死或者宕机

## CAP定理

![CAP定理](image\cap定理.png)

一致性，分区容错性和可用性

## BASE理论

Basically  Available(基本可用), Soft stat（软状态）, Eventurally consistant（最终一致性）

**基本可用**

系统出现不可预知的故障时，允许损失部分可用性

* 响应时间的损失：节点故障，原本0.5s的响应时间延迟到1s的响应时间
* 功能上的损失：节日大促购物高峰的时候，为了保护系统的稳定性，将用户引导到一个降级页面

**软状态**

允许系统在不同节点的数据副本之间进行同步的时候存在延时

**最终一致性**

系统中的所有数据副本，在经过一段时间的同步之后，最终能达到一个一致的状态